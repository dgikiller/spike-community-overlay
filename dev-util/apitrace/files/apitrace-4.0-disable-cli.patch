--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -364,7 +364,6 @@
 add_subdirectory (helpers)
 add_subdirectory (wrappers)
 add_subdirectory (image)
-add_subdirectory (retrace)
 
 
 ##############################################################################
@@ -375,30 +374,34 @@
         add_subdirectory (inject)
     endif ()
     add_subdirectory (cli)
+    add_subdirectory (retrace)
 endif ()
 
 ##############################################################################
 # Scripts (to support the CLI)
 
-install (
-    PROGRAMS
-        scripts/highlight.py
-        scripts/jsondiff.py
-        scripts/profileshader.py
-        scripts/retracediff.py
-        scripts/snapdiff.py
-        scripts/tracecheck.py
-        scripts/tracediff.py
-        scripts/unpickle.py
-    DESTINATION ${SCRIPTS_INSTALL_DIR}
-)
-if (WIN32)
+if (ENABLE_CLI)
     install (
-        PROGRAMS scripts/convert.py
+        PROGRAMS
+            scripts/highlight.py
+            scripts/jsondiff.py
+            scripts/profileshader.py
+            scripts/retracediff.py
+            scripts/snapdiff.py
+            scripts/tracecheck.py
+            scripts/tracediff.py
+            scripts/unpickle.py
         DESTINATION ${SCRIPTS_INSTALL_DIR}
     )
+    if (WIN32)
+        install (
+            PROGRAMS scripts/convert.py
+            DESTINATION ${SCRIPTS_INSTALL_DIR}
+        )
+    endif ()
 endif ()
 
+
 ##############################################################################
 # GUI
 